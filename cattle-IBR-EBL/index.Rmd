--- 
title: "Documentation of the IBR & EBL surveillance programme tools"
author: "Valerie Hungerbühler & Gary Delalay"
date: "`r format(Sys.time(), '%B %d, %Y')`"
documentclass: book
bibliography: [bibliography.bibtex, packages.bib]
description: "This is a manual for the code used for the tools for the surveillance programme for Infectious bovine rhinotracheitis (IBR) and Enzootic bovine leukosis (EBL) in cattle in Switzerland."
biblio-style: apalike
csl: apa.csl
favicon: images/favicon/favicon.ico
cover-image: images/cattle.jpg
---

# About {-}

<div class="h1";">Documentation of the IBR & EBL surveillance programme tools</div>

```{r panel-setup, include = FALSE}
xaringanExtra::use_panelset()
xaringanExtra::style_panelset(font_family = "inherit")
```

This documentation is designed to be used by the maintainer of the code of the tools for the surveillance programme for Infectious bovine rhinotracheitis (IBR) and Enzootic bovine leukosis (EBL) in cattle in Switzerland.

There is actually two tools which were created: the first one is used to plan for the next period of the surveillance programme, while the second one is used at the end of the period of the surveillance programme to calculate the probability of freedom reached.

The surveillance programme is based on the scenario-tree method described by [@RN2]. The package used to implement the method is the package `freedom` [@R-freedom].

## Where to find the code {-}

The code for the planning of the surveillance programme can be found at the following location: `path/code/planning.R`.

The code for the evaluation of the surveillance programme can be found at the following location: `path/code/evaluation.R`.

Additionally, the code for this manual can be found at the following location: `path/documentation/code_documentation`. There are several `.Rmd` documents that are used to compile this documentation. The `index.Rmd` codes the first part of this book and comprises the section you are reading. The `.Rmd` files beginning with `1.` code for the part relative to the planning, while the `.Rmd` files beginning with `2.` code for the part relative to the evaluation. The references and appendices are coded by the `.Rmd` files beginning with `3.`.

## About this documentation {-}

### Software and packages used {-}

This documentation was coded with `R version 4.2.0 "Vigorous Calisthenics"` [@R-base] in the integrated development environment `RStudio version 2022.02.2 Build 485 "Prairie Trillium"` with the packages `bookdown version 0.28` [@R-bookdown; @bookdown2016], `knitr version 1.40` [@R-knitr; @knitr2015; @knitr2014], `kableExtra version 1.3.4` [@R-kableExtra] and `xaringanExtra verison 0.7.0` [@R-xaringanExtra]. Additionally, all packages used to programme the tools (see [sections 1.3.1](#packages_plan) and [8.3.1](#packages_eval)) were also used in this documentation.

### Source of data and privacy issues {-}

The data used in this document are described in the following chapters. However, some of these data sensible as they contain personal information. For this reason, some changes were apported to the data.

The `.xlsx` file `risk_factors_AI_ND.xlsx` was modified in order to change the names of the experts that provided us information on the relative risk to *'Expert1'* to *'Expert4'*. The new data frame was named `risk_factors_AI_ND_anonymised.xlsx` and was loaded in this documentation instead of the original one.

Data on the poultry population originates from ALVPH and is exported into the document `AI_ND_surveillance__poultry_data.xlsx`. This document and all its sheets were edited in order to remove sensitive data.\
`AGIS` and `TVD` identifiers were suppressed, and random numbers were attributed to these variables.\
Blurring was added to the coordinates of the premises with this formula: `coordinate <- coordinate + round(rnorm(1, mean = oL, sd = 3000L))` both for longitudes and latitudes. This blurring was done independently for each value. The coordinates were expressed in the `LV95` format, which means that the standard deviation in the blurring was of 30km.\
First names and surnames were replaced by new ones randomly generated from a small pool of 53 first names (26 male and 27 female) and 43 surnames.\
Street and city names were also replaced with random names from a small pool of 24 streets and 34 cities. Postcodes were replaced with randomly selected 4 digits numbers, which were not linked to the newly attributed cities.\
The edited data was saved under `risk_factors_AI_ND_anonymised.xlsx` and was loaded in this documentation instead of the original one.

Data on the samples and tests performed during the surveillance programme were also extracted from ALVPH and edited. The same script was used to edit the documents `3023_AI_Nutzgefluegel.xlsx` and `3025_ND_Nutzgefluegel.xlsx` As only one sheet (`Übersicht Betrieb`) is loaded in the documentation, only this sheet was anonymised.\
`AGIS` and `TVD` identifiers were modified in a similar way as for `AI_ND_surveillance__poultry_data_anonymised.xlsx`. However, on change was made for the `AGIS` identifier: to be sure that the data makes sense and that sentinel herds are attributed high relative risks, the sentinel herds were attributed the same `AGIS` identifiers than the ones that were attributed to potential sentinels in the planning tool. Please note that this has no effect on the anonymisation, as these calculations were already done on anonymised data.\
Data for the variable `Betrieb-ID` were deleted and were replaced by a copy of data from the `TVD` variable. Additionally, the variable `Kt_ID_B_DWH` was attributed random 4 digits numbers.\
The variable `Person (privat)` was populated with combinations of first names, surnames, postcodes and cities which were generated with the same pools than stated for `AI_ND_surveillance__poultry_data.xlsx`. These elements were combined in this format: `paste(paste("first name", "surname", sep = " "), paste("postcode", "city", sep = " "), sep = ", ")`.\
The lab ID (`Labor-ID`) of the only lab in the database was attributed a random ID ranging between 1 and 50. The sample ID (`Proben-ID (Stamm)`) was attributed a random ID built on this model: `YY-M####`, with `YY` the 2 digit year code, and `####` a random 4 digit number.\
Finally, the dates the samples were taken were also replaced by dates randomly selected from the year of interest.\
The edited data frames were saved under `3023_AI_Nutzgefluegel_anonymised.xlsx` respectively `3025_ND_Nutzgefluegel_anonymised.xlsx`. As this documentation gives examples for Newcastle Disease, the data loaded in this documentation is `3025_ND_Nutzgefluegel_anonymised.xlsx`.

```{r, eval=FALSE, include=FALSE}
bookdown::render_book()
```
